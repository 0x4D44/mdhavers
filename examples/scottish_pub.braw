# scottish_pub.braw - A wee Scottish pub simulation!
# Demonstrating the braw features of mdhavers

blether "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
blether "   Welcome tae The Bonnie Heather Pub!"
blether "   FÃ ilte gu taigh-seinnse!"
blether "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
blether ""

# Our menu - guid Scottish fare
ken menu = {
    "haggis": 12,
    "neeps_n_tatties": 8,
    "cullen_skink": 10,
    "irn_bru": 3,
    "whisky": 7,
    "shortbread": 5
}

# Scottish expressions for different situations
ken expressions = {
    "happy": ["Och, that's braw!", "Jings, that's grand!", "Bonnie!"],
    "sad": ["Och, that's a shame", "Dinnae fash yersel", "Ach, never mind"],
    "surprised": ["Help ma boab!", "Crivvens!", "Jings crivvens help ma boab!"]
}

# A wee customer class
kin Customer {
    dae init(name, wallet) {
        masel.name = name
        masel.wallet = wallet
        masel.items = []
        masel.happiness = 50
    }

    dae greet() {
        blether f"Hullo there! Ah'm {masel.name}, nice tae meet ye!"
    }

    dae order(item, price) {
        gin masel.wallet >= price {
            masel.wallet = masel.wallet - price
            shove(masel.items, item)
            masel.happiness = masel.happiness + 10
            gie aye
        } ither {
            gie nae
        }
    }

    dae react(mood) {
        ken phrases = expressions[mood]
        ken idx = jammy(0, len(phrases))
        gie phrases[idx]
    }

    dae show_tab() {
        blether f"{masel.name}'s tab: {masel.items}"
        blether f"Wallet: Â£{masel.wallet}"
        blether f"Happiness: {masel.happiness}%"
    }
}

# Create some customers
ken hamish = Customer("Hamish McTavish", 50)
ken morag = Customer("Morag MacLeod", 35)
ken angus = Customer("Angus MacDonald", 25)

# The pub opens!
blether ""
blether "The pub is openin'... "
blether ""

# Each customer greets
hamish.greet()
morag.greet()
angus.greet()

blether ""
blether "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
blether "                    MENU"
blether "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"

# Show the menu using iteration
fer item in keys(menu) {
    ken price = menu[item]
    ken name = replace(item, "_", " ")
    ken padded = pad_right(name, 20, ".")
    blether f"  {padded} Â£{price}"
}

blether "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
blether ""

# Simulate ordering
dae place_order(customer, item) {
    gin contains(menu, item) {
        ken price = menu[item]
        ken success = customer.order(item, price)
        gin success {
            blether f"{customer.name}: \"Ah'll hae the {item} please!\""
            ken reaction = customer.react("happy")
            blether f"  {reaction}"
        } ither {
            blether f"{customer.name}: \"Och, ah cannae afford the {item}...\""
            ken reaction = customer.react("sad")
            blether f"  {reaction}"
        }
    } ither {
        blether f"Barkeep: \"Sorry pal, we dinnae hae {item}!\""
    }
}

# Evening service
blether "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
blether "â•‘           EVENING SERVICE BEGINS             â•‘"
blether "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
blether ""

# Hamish is hungry!
place_order(hamish, "haggis")
place_order(hamish, "whisky")
place_order(hamish, "whisky")

blether ""

# Morag wants soup
place_order(morag, "cullen_skink")
place_order(morag, "irn_bru")
place_order(morag, "shortbread")

blether ""

# Angus tries to order beyond his means
place_order(angus, "whisky")
place_order(angus, "whisky")
place_order(angus, "haggis")  # Cannae afford this!
place_order(angus, "irn_bru")  # Can still afford this

blether ""
blether "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
blether "                 END OF EVENING"
blether "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
blether ""

# Show everyone's tabs
blether "TABS:"
blether "------"
hamish.show_tab()
blether ""
morag.show_tab()
blether ""
angus.show_tab()

blether ""

# Calculate pub's earnings
ken all_orders = slap(hamish.items, slap(morag.items, angus.items))
ken total_earned = 0
fer item in all_orders {
    total_earned = total_earned + menu[item]
}

blether f"The pub earned Â£{total_earned} the night. Braw!"

# Fun with Scottish functions
blether ""
blether "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
blether "         SOME SCOTTISH EXPRESSIONS"
blether "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
blether ""

blether och("That's the last o' the haggis!")
blether jings("The whisky's nearly done!")
blether crivvens("Morag just ordered another round!")
blether help_ma_boab("It's past closin' time!")

blether ""
blether roar("last orders")
blether mutter("time tae go hame")

# Test scottify
ken english = "I know nothing about the children going to the little church"
blether ""
blether f"English: {english}"
blether f"Scots:   {scottify(english)}"

blether ""
blether "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
blether "  Thanks fer visitin' The Bonnie Heather!"
blether "  Haste ye back!"
blether "  SlÃ inte mhath! ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿"
blether "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
