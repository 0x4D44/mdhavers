# Journal - tri 3D graphics (LLVM/native)

Date: 2025-12-20

## 09:15
- Added MDH_TAG_NATIVE to runtime header and implemented native object support in mdh_runtime.c (native get/set/call helpers, type_name handling, type_error strings).
- Implemented tri module/object/constructor stubs in C runtime: constructors, defaults, method dispatch (adde/remuiv/cloan/etc.), transform fields, constants, and tri module singleton.
- Wired LLVM codegen to native runtime: declared native_get/set/call0..8 and tri_module, updated import handling for tri, added native branches to get/set/method calls, and allowed calling native values.
- Added LLVM tests for tri constructor-as-value call and native method dispatch (children list).

## 09:40
- Aligned native ctor typing: whit_kind now reports "native function" for tri constructors, is_a("function") recognizes tri ctor values, and __mdh_is_function includes native ctor.
- Added native object string formatting in runtime (__mdh_to_string) to show <native ...> and <native dae tri.X> for constructors.

## 10:20
- Matched tri constructor defaults in the LLVM C runtime to interpreter/WAT (BoxGeometrie, cameras, lights, materials, etc.).
- Added tri default-constructor coverage tests for interpreter and LLVM runs (BoxGeometrie width = 1).

## 10:45
- Added WAT host runner support for tri constructor values (constructor handle type, string formatting, truthiness, and property get on tri module).
- Centralized tri handle calling in the WASM runner and wired all method_call arities through it.

## 11:05
- Added WASM compiler support for calling local value handles via method-call "call" (enables tri constructor value calls).
- Added WAT test for tri constructor-as-value calls and updated unsupported-call error message.
